<!DOCTYPE html>
<html>
<head>
    <title>3DS Playtime</title>
    <link href="assets/style.css" rel="stylesheet" text="text/css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"> </script> 
    <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8"></script>
    <script src="node_modules/chartjs-plugin-zoom/dist/chartjs-plugin-zoom.min.js"></script>
</head>
<body>
  <h1>My 3DS Playtime Over the Years</h1>
    <canvas id = "graph" height = "100px">
    </canvas>
    <div id="tooltip"></div>
</body>
<script>
let hovering = false; // checking if you're hovering over the legend specifically, NOT the graph items
// really long array of the total playtime and top game of each year, aligned to each year for when you hover over the legend
let tooltips = ["Total Playtime: 132:10 <br> Top Game: Pokemon Black 2 (70:54)", "Total Playtime: 1489:42 <br> Top Game: Pokemon X (1191:03)", "Total Playtime: 92:48 <br> Top Game: Pokemon Alpha Sapphire (46:24)", 
"Total Playtime: 320:34 <br> Top Game: Pokemon Alpha Sapphire (173:02)", "Total Playtime: 469:16 <br> Top Game: Phoenix Wright: Ace Attorney: Spirit of Justice (176:13)", 
"Total Playtime: 112:49 <br> Top Game: Pokemon Alpha Sapphire (55:37)", "Total Playtime: 155:11 <br> Top Game: WarioWare Gold (34:10)", "Total Playtime: 50:38 <br> Top Game: WarioWare Gold (28:36)", "Total Playtime: 33:43 <br> Top Game: Pokemon Black 2 (16:56)", 
"Total Playtime: 88:08 <br> Top Game: Pokemon X (38:45)", "Total Playtime: 90:41 <br> Top Game: Pokemon Ultra Moon (41:53)", "Total Playtime: 169:14 <br> Top Game: Pokemon Ultra Moon (102:28)", "Total Playtime: 75:17 <br> Top Game: Pokemon Ultra Moon (35:24)"];
// x values
const xValues = ['January', 'February','March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
const ctx = document.getElementById("graph");

new Chart(ctx, { // creating the chart
  id: "Chart",
  type: "line",
  data: {
    labels: xValues,
    datasets: [{ 
      label: "2013",
      data: [0, 0, 0, 0, 0, 0, 39.49, 51.54, 15.49, 2.43, 11.40, 10.15],
      borderColor: "red",
      pointRadius: 2,
      tension: 0.4,
    }, { 
      label: "2014",
      data: [4.22, 32.41, 110.24, 134.39, 167.31, 401.20, 406.24, 199.13, 23.50, 7.46, 1.12, 0.20],
      borderColor: "green",
      pointRadius: 2,
      tension: 0.4,
    }, { 
      label: "2015",
      data: [0.26, 18.32, 3.10, 18.15, 0.29, 0, 0.42, 0.4, 0, 3.09, 0, 48.01],
      borderColor: "blue",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2016",
      data: [70.15, 5.27, 1.09, 3.26, 2.45, 0.32, 35.51, 75.03, 2.18, 60.12, 44.41, 18.55],
      borderColor: "yellow",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2017",
      data: [2.46, 27.05, 75.13, 103.55, 60.21, 51.47, 59.16, 12.02, 5.43, 19.03, 22.34, 29.31],
      borderColor: "black",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2018",
      data: [0.27, 0.03, 0.48, 0, 0, 0, 0, 0.05, 3.42, 3.21, 65.38, 38.45],
      borderColor: "purple",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2019",
      data: [46.52, 19.46, 0.45, 21.14, 16.33, 12.39, 13.39, 18.24, 3.26, 1.20, 0.33, 0],
      borderColor: "pink",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2020",
      data: [0, 2.28, 0.29, 0.11, 0.21, 0.26, 10.44, 6.00, 15.06, 11.35, 2.50, 0.28],
      borderColor: "cyan",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2021",
      data: [0, 0.44, 2.44, 0.13, 0, 0, 0.27, 4.45, 0.42, 0.15, 22.21, 0.32],
      borderColor: "magenta",
      pointRadius: 2,
      tension: 0.4,
    },
{ 
      label: "2022",
      data: [8.01, 11.43, 0.05, 1.088, 0.58, 11.51, 2.11, 11.04, 2.39, 0.03, 16.30, 4.55],
      borderColor: "orange",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2023",
      data: [0.17, 2.10, 0.24, 0, 14.19, 16.12, 4.26, 3.53, 2.45, 2.06, 0.33, 43.36],
      borderColor: "brown",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2024",
      data: [5.33, 3.01, 0.13, 23.11, 46.36, 33.29, 1.11, 8.02, 10.33, 18.45, 4.41, 13.59],
      borderColor: "gray",
      pointRadius: 2,
      tension: 0.4,
    },
    { 
      label: "2025",
      data: [13.08, 5.01, 0.05, 0.49, 0.48, 7.06, 15.32, 31.43, 0.46, 0.40],
      borderColor: "maroon",
      pointRadius: 2,
      tension: 0.4,
    },
  ]
  },
  options: {
    plugins: {
      legend: { 
        onHover: function(event, legendItem) {
          if (hovering) {
            return;
          }
          hovering = true;
          tooltip.innerHTML = tooltips[legendItem.datasetIndex];
          tooltip.style.left = event.x + "px";
          tooltip.style.top = event.y + "px";
          tooltip.style.padding = "0.5%"; // only increase the padding when text is shown, otherwise there's a black bar at the screen at all times
        },
        onLeave: function() {
          hovering = false;
          tooltip.innerHTML = "";
          tooltip.style.padding = "0%"; // removing the padding so the tooltip disappears completely from view
        }},
      zoom: {
        pan: {
          enabled: true,
        },
        zoom: {
          wheel: {
            enabled: true,
          },
          pinch: {
            enabled: true
          },
          mode: 'xy',
        }
    },
  }
}});
</script>
</html>